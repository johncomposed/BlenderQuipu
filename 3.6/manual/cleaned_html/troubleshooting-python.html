<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head><title>Troubleshooting &gt; Python</title></head>
<body><ul>
<li><a href="index.html">Troubleshooting</a></li>
<li>Python Errors</li>
</ul><div>
<div itemprop="articleBody">
<section id="python-errors">
<h1>Python Errors</h1>
<section id="precompiled-libraries">
<h2>Precompiled Libraries</h2>
<p>While not common practice, Python add-ons can be distributed with their own precompiled libraries.
Unlike regular Python scripts, these are not portable between different platforms.</p>
<p>It is possible the library is incompatible with your Blender installation
(attempting to load a library built for a different version of Python,
or loading a 32-bit library on a 64-bit system).</p>
<p>If the add-on contains <code>.pyd</code> or <code>.so</code> files,
check that the distribution is compatible with your operating system.</p>
</section>
<section id="platform-specific">
<h2>Platform Specific</h2>
<section id="windows">
<h3>Windows</h3>
<section id="mixed-python-libraries-dlls">
<h4>Mixed Python Libraries (DLLs)</h4>
<p>If Python is raising errors or you have an add-on that just fails when enabled with an error, e.g:
<code>... is not a valid Win32 application.</code>.</p>
<figure id="id1">
<figcaption>
<p>A Python traceback.</p>
</figcaption>
</figure>
<p>This may be caused by some inconsistency in the Python libraries.
While Blender comes with its own bundled Python interpreter, duplicate, incompatible libraries can cause problems.</p>
<p>To find out which Python Library caused the Problem check the error message.</p>
<p>This is normally reported somewhere around the bottom line of the traceback.
With the error above you see the problem is caused while trying to import <code>_socket</code>.
This corresponds to either a file named <code>_socket.py</code> or <code>_socket.pyd</code>.</p>
<p>To help troubleshoot this problem,
the following script can be pasted into the Text editor and run to check for duplicate libraries in your search path.
(The output will show in <a href="../advanced/command_line/introduction.html">Command Line Window</a>.)</p>
<div><div><pre>import os
import sys

# Change this based on the library you wish to test
test_lib = "_socket.pyd"

def GetSystemDirectory():
    from ctypes import windll, create_string_buffer, sizeof
    GetSystemDirectory = windll.kernel32.GetSystemDirectoryA
    buffer = create_string_buffer(260)
    GetSystemDirectory(buffer, sizeof(buffer))
    return os.fsdecode(buffer.value)

def library_search_paths():
    return (
        # Windows search paths
        os.path.dirname(sys.argv[0]),
        os.getcwd(),
        GetSystemDirectory(),
        os.environ["WINDIR"],  # GetWindowsDirectory
        *os.environ["PATH"].split(";"),

        # regular Python search paths
        *sys.path,
        )

def check_library_duplicate(libname):
    paths = [p for p in library_search_paths()
             if os.path.exists(os.path.join(p, libname))]

    print("Library %r found in %d locations:" % (libname, len(paths)))
    for p in paths:
        print("- %r" % p)

check_library_duplicate(test_lib)
</pre></div>
</div>
</section>
</section>
</section>
</section>
</div>
</div></body>
</html>